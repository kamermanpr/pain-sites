---
title: "Supplement 1"
subtitle: "Demographics"
author: "Peter Kamerman" 
date: "Last knitted: `r format(Sys.Date(), '%d %B %Y')`"
---

```{r setup, include = FALSE}
# Load packages
library(tidyverse)
library(skimr)
library(knitr)

# Create figures folder
if(!dir.exists('figures')){
    dir.create('figures')
}

# Skimr options
my_skim <- skim_with(factor = sfl(ordered = NULL),
                     numeric = sfl(hist = NULL))

# Set knitr options
knitr::opts_chunk$set(echo = TRUE,
                      message = FALSE,
                      warning = FALSE)
```

----

# Import and check data

```{r import}
# Import
demo <- read_rds('data-cleaned/data-demographics.rds')

# Check
## Demographics
dim(demo)
names(demo)
glimpse(demo)
```

----

# Basic descriptive statistics

## Full cohort

### Descriptives

```{r numerical_sites}
demo %>% 
    # Remove ID column
    select(-ID, -Site) %>% 
    # Convert character to factor
    mutate_if(is.character, factor) %>% 
    my_skim()
```

## By study site

### Sample size

```{r numerical_size}
demo %>% 
    # Select ID
    select(Site) %>% 
    # Group by study site
    group_by(Site) %>% 
    summarise(Count = n()) %>% 
    kable(caption = 'Sample size by study site')
```

### Descriptives

```{r numerical_demo}
demo %>% 
    # Convert character to factor
    mutate_if(is.character, factor) %>% 
    # Remove ID
    select(-ID) %>% 
    # Group by site
    group_by(Site) %>%
    my_skim()
```

\newpage

# Session information

```{r session}
sessionInfo()
```